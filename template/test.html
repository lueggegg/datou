<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>表格</title>
    <script type="text/javascript" src="res/jquery/external/jquery/jquery.js"></script>
    <script type="text/javascript" src="res/jquery/jquery-ui.js"></script>
    <link href="res/jquery/jquery-ui.css" rel="stylesheet">
    <link href="res/css/base.css" rel="stylesheet">
    <script type="text/javascript" src="res/script/type_define.js"></script>
    <script type="text/javascript" src="res/script/base.js"></script>
    <link href="res/css/navigation.css" rel="stylesheet">

    <link rel="stylesheet" href="res/css/module_employee_info_table.css">
</head>
<body>

<div class="table_container">
    <div class="table_title">
        东部传媒公司人员基本情况登记表
    </div>
    <div class="table_mod_date">
        填表日期：
        <input type="text" class="date_picker" id="mod_date">
    </div>

    <table cellspacing="0">
        <tr>
            <td class="title_td">姓名</td>
            <td class="content_td"><input type="text" id="name"> </td>
            <td class="title_td">性别</td>
            <td class="content_td">
                <select id="sex">
                    <option value="男" selected>男</option>
                    <option value="女">女</option>
                </select>
            </td>
            <td class="title_td">籍贯</td>
            <td class="content_td"><input type="text" id="descent"></td>
            <td rowspan="5" class="photo_td">
                <div class="photo_td_content">
                    <div class="portrait_container">
                        <a href="javascript:" title="选择照片">
                            <img src="res/images/default_portrait.png" class="portrait" id="personal_portrait">
                            <input type="file" accept="image/*" id="portrait_file" onchange="onPortraitChange()">
                        </a>
                    </div>
                    <div class="portrait_upload_btn_container">
                        <button class="ui-button ui-corner-all" onclick="uploadPortrait()">上传</button>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>政治面貌</td>
            <td class="content_td">
                <select id="politics">
                    <option value="中共党员" selected>中共党员</option>
                    <option value="群众">群众</option>
                    <option value="其他">其他</option>
                </select>
            </td>
            <td>民族</td>
            <td class="content_td"><input type="text" id="nation"></td>
            <td>出生日期</td>
            <td class="content_td"><input type="text" class="date_picker" id="birthday"></td>
        </tr>
        <tr>
            <td>婚姻状况</td>
            <td><input type="text" id="marriage"></td>
            <td>身份证号</td>
            <td colspan="3"><input type="text" id="id_card"></td>
        </tr>
        <tr>
            <td>干部或职工</td>
            <td colspan="2">
                <select id="leadership">
                    <option selected value="职工">职工</option>
                    <option value="干部">干部</option>
                </select>
            </td>
            <td>技术职称</td>
            <td>
                <select id="technical_title">
                    <option selected>无</option>
                    <option>会计师</option>
                    <option>编辑</option>
                    <option>记者</option>
                    <option>工程师</option>
                </select>
            </td>
            <td>
                <select id="technical_title_level">
                    <option selected>无</option>
                    <option>助理</option>
                    <option>中级</option>
                    <option>高级</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>最高学历</td>
            <td colspan="2">
                <select id="education_level">
                    <option value="小学">小学</option>
                    <option value="初中">初中</option>
                    <option value="高中">高中</option>
                    <option value="中专">中专</option>
                    <option value="大专">大专</option>
                    <option value="本科" selected>本科</option>
                    <option value="硕士研究生">硕士研究生</option>
                    <option value="博士研究生">博士研究生</option>
                </select>
            </td>
            <td>最高学位</td>
            <td colspan="2">
                <select id="degree">
                    <option value="无" selected>无</option>
                    <option value="学士">学士</option>
                    <option value="硕士">硕士</option>
                    <option value="博士">博士</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>学历 学位</td>
            <td>
                <select id="education_type">
                    <option value="全日制教育" selected>全日制教育</option>
                    <option value="在职教育">在职教育</option>
                </select>
            </td>
            <td>毕业院校</td>
            <td><input type="text" id="college"></td>
            <td>专业</td>
            <td><input type="text" id="major"> </td>
            <td>
                <div>
                    <div class="element_left" style="width: 43%">毕业时间</div>
                    <div class="element_left" style="width: 55%"><input type="text" class="date_picker" id="graduate_date"></div>
                </div>
            </td>
        </tr>
        <tr>
            <td>户口所在地详细地址</td>
            <td colspan="4"><input type="text" id="registered_address"></td>
            <td>参加工作时间</td>
            <td><input type="text" class="date_picker" id="work_begin_date"></td>
        </tr>
        <tr>
            <td>现工作岗位</td>
            <td>
                <select id="position">
                    <option value="主任">主任</option>
                    <option value="副主作">副主任</option>
                    <option value="一级主管">一级主管</option>
                    <option value="二级主管">二级主管</option>
                    <option value="一级员工" selected>一级员工</option>
                    <option value="临聘员工">临聘员工</option>
                </select>
            </td>
            <td rowspan="2">何时何种形式进入本公司工作</td>
            <td colspan="4" rowspan="2">
                <input class="date_picker join_date" type="text" placeholder="何时">
                <input class="join_condition" type="text" id="condition_of_this_job">
            </td>
        </tr>
        <tr>
            <td>编制</td>
            <td>
                <select id="authorized_strength">
                    <option value="事业编制" selected>事业编制</option>
                    <option value="集团派出领导">集团派出领导</option>
                    <option value="企业编制职工">企业编制职工</option>
                    <option value="企业编制干部">企业编制干部</option>
                    <option value="临聘员工">临聘员工</option>
                </select>
            </td>
        </tr>
        <tr>
            <td rowspan="2">通讯方式</td>
            <td>手机</td>
            <td colspan="2"><input type="text" id="cellphone"></td>
            <td>家庭电话</td>
            <td colspan="2"><input type="text" id="home_number"></td>
        </tr>
        <tr>
            <td>现居住地址</td>
            <td colspan="5"><input type="text" id="address"></td>
        </tr>
        <tr>
            <td colspan="2">应急联系人</td>
            <td colspan="2"><input type="text" id="emergency_contact"></td>
            <td>联系电话</td>
            <td colspan="2"><input type="text" id="emergency_contact_number"></td>
        </tr>
        <tr>
            <td rowspan="4">教育培训经历（从高中写起）</td>
            <td>开始时间</td>
            <td>结束时间</td>
            <td>学校/培训机构</td>
            <td>专业/培训内容</td>
            <td>是否取得学历</td>
            <td>备注</td>
        </tr>
        <tr>
            <td><input type="text" class="date_picker" id="education_begin_0"></td>
            <td><input type="text" class="date_picker" id="education_end_0"></td>
            <td><input type="text" id="education_college_0"></td>
            <td><input type="text" id="education_major_0"></td>
            <td><input type="text" id="education_certificate_0"></td>
            <td><input type="text" id="education_mark_0"></td>
        </tr>
        <tr>
            <td><input type="text" class="date_picker" id="education_begin_1"></td>
            <td><input type="text" class="date_picker" id="education_end_1"></td>
            <td><input type="text" id="education_college_1"></td>
            <td><input type="text" id="education_major_1"></td>
            <td><input type="text" id="education_certificate_1"></td>
            <td><input type="text" id="education_mark_1"></td>
        </tr>
        <tr>
            <td><input type="text" class="date_picker" id="education_begin_2"></td>
            <td><input type="text" class="date_picker" id="education_end_2"></td>
            <td><input type="text" id="education_college_2"></td>
            <td><input type="text" id="education_major_2"></td>
            <td><input type="text" id="education_certificate_2"></td>
            <td><input type="text" id="education_mark_2"></td>
        </tr>
        <tr>
            <td>懂何种外语</td>
            <td><input type="text" id="foreign_language"></td>
            <td>熟练程度</td>
            <td><input type="text" id="foreign_language_level"></td>
            <td>特长</td>
            <td colspan="2"><input type="text" id="speciality"></td>
        </tr>
        <tr>
            <td rowspan="5">主要工作经历</td>
            <td>开始时间</td>
            <td>结束时间</td>
            <td>工作单位</td>
            <td>工作岗位</td>
            <td>离职原因</td>
            <td>备注</td>
        </tr>
        <tr>
            <td><input type="text" class="date_picker" id="job_begin_0"></td>
            <td><input type="text" class="date_picker" id="job_end_0"></td>
            <td><input type="text" id="job_company_0"></td>
            <td><input type="text" id="job_position_0"></td>
            <td><input type="text" id="job_resign_reason_0"></td>
            <td><input type="text" id="job_mark_0"></td>
        </tr>
        <tr>
            <td><input type="text" class="date_picker" id="job_begin_1"></td>
            <td><input type="text" class="date_picker" id="job_end_1"></td>
            <td><input type="text" id="job_company_1"></td>
            <td><input type="text" id="job_position_1"></td>
            <td><input type="text" id="job_resign_reason_1"></td>
            <td><input type="text" id="job_mark_1"></td>
        </tr>
        <tr>
            <td><input type="text" class="date_picker" id="job_begin_2"></td>
            <td><input type="text" class="date_picker" id="job_end_2"></td>
            <td><input type="text" id="job_company_2"></td>
            <td><input type="text" id="job_position_2"></td>
            <td><input type="text" id="job_resign_reason_2"></td>
            <td><input type="text" id="job_mark_2"></td>
        </tr>
        <tr>
            <td><input type="text" class="date_picker" id="job_begin_3"></td>
            <td><input type="text" class="date_picker" id="job_end_3"></td>
            <td><input type="text" id="job_company_3"></td>
            <td><input type="text" id="job_position_3"></td>
            <td><input type="text" id="job_resign_reason_3"></td>
            <td><input type="text" id="job_mark_3"></td>
        </tr>
        <tr>
            <td rowspan="5">家庭成员</td>
            <td>称谓</td>
            <td>姓名</td>
            <td>出生年月</td>
            <td>政治面貌</td>
            <td colspan="2">工作单位及职务</td>
        </tr>
        <tr>
            <td><input type="text" id="member_relation_0"></td>
            <td><input type="text" id="member_name_0"></td>
            <td><input type="text" class="date_picker" id="member_birthday_0"></td>
            <td>
                <select id="member_politics_0">
                    <option value="中共党员" selected>中共党员</option>
                    <option value="群众">群众</option>
                    <option value="其他">其他</option>
                </select>
            </td>
            <td colspan="2"><input type="text" id="member_job_0"></td>
        </tr>
        <tr>
            <td><input type="text" id="member_relation_1"></td>
            <td><input type="text" id="member_name_1"></td>
            <td><input type="text" class="date_picker" id="member_birthday_1"></td>
            <td>
                <select id="member_politics_1">
                    <option value="中共党员" selected>中共党员</option>
                    <option value="群众">群众</option>
                    <option value="其他">其他</option>
                </select>
            </td>
            <td colspan="2"><input type="text" id="member_job_1"></td>
        </tr>
        <tr>
            <td><input type="text" id="member_relation_2"></td>
            <td><input type="text" id="member_name_2"></td>
            <td><input type="text" class="date_picker" id="member_birthday_2"></td>
            <td>
                <select id="member_politics_2">
                    <option value="中共党员" selected>中共党员</option>
                    <option value="群众">群众</option>
                    <option value="其他">其他</option>
                </select>
            </td>
            <td colspan="2"><input type="text" id="member_job_2"></td>
        </tr>
        <tr>
            <td><input type="text" id="member_relation_3"></td>
            <td><input type="text" id="member_name_3"></td>
            <td><input type="text" class="date_picker" id="member_birthday_3"></td>
            <td>
                <select id="member_politics_3">
                    <option value="中共党员" selected>中共党员</option>
                    <option value="群众">群众</option>
                    <option value="其他">其他</option>
                </select>
            </td>
            <td colspan="2"><input type="text" id="member_job_3"></td>
        </tr>
        <tr>
            <td colspan="7" class="mark_info">
                本人承诺以上所有信息真实有效，且可以作为审查依据，
                若出现问题愿意承担相应责任，若本人信息更新及时通知本部门，否则按公司规定处理。
            </td>
        </tr>
        <!--<tr>-->
            <!--<td colspan="7"></td>-->
        <!--</tr>-->
        <tr>
            <td colspan="7">
                <div class="commit_btn_container">
                    <button class="ui-button ui-corner-all" onclick="commit()">提交</button>
                </div>
            </td>
        </tr>
    </table>
</div>

<script>
    var module_data = {
        portrait_data: null
    };

    $(function() {
        initFields();
        initDatePicker($(".date_picker"));
    });

    function initFields() {
        var field = [
            'name',
            'sex',
            'descent',
            'politics',
            'nation',
            'birthday',
            'marriage',
            'id_card',
            'leadership',
            'technical_title',
            'technical_title_level',
            'education_level',
            'degree',
            'education_type',
            'college',
            'major',
            'graduate_date',
            'registered_address',
            'work_begin_date',
            'position',
            'condition_of_this_job',
            'authorized_strength',
            'cellphone',
            'home_number',
            'address',
            'emergency_contact',
            'emergency_contact_number',
            'foreign_language',
            'foreign_language_level',
            'speciality'
        ];

        var education_field = ['begin', 'end', 'college', 'major', 'certificate', 'mark'];
        addListField(field, education_field, 'education', 3);

        var job_field = ['begin', 'end', 'company', 'position', 'resign_reason', 'mark'];
        addListField(field, job_field, 'job', 4);

        var member_field = ['relation', 'name', 'birthday', 'politics', 'job'];
        addListField(field, member_field, 'member', 4);

        module_data['fields'] = field;
    }

    function onPortraitChange() {
        var files = $("#portrait_file")[0].files;
        if (files.length === 0) {
            return;
        }
        var f = files[0];
        var reader = new FileReader();
        reader.onload = function (e) {
            module_data.portrait_data = e.target.result;
            $("#personal_portrait").attr('src', module_data.portrait_data);

        };
        reader.readAsDataURL(f);
    }

    function uploadPortrait() {
    }

    function commit() {

        var info = {};
        module_data.fields.forEach(function (p1, p2, p3) {
            info[p1] = $("#" + p1).val();
        });
        alert(JSON.stringify(info));
    }

    function addListField(fields, sub_fields, prefix, count) {
        for (var i = 0; i < count; ++i) {
            sub_fields.forEach(function (p1, p2, p3) {
                fields.push(prefix + '_' + p1 + '_' + i);
            });
        }
    }

</script>
</body>
</html>